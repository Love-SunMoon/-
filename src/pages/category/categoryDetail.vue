<template><view class="head">  <titles>{{ title }}</titles>  <sort @sortClick="handleSort"></sort></view>  <goods-item id="goods" :data="data"></goods-item>  <scroll-top></scroll-top></template><script>import titles from '../basic/title'import sort from "../common/sort.vue";import { getSearchItem } from '../../network/requests';import { ref } from 'vue';import {handleRequests, scrollToLowerLoad} from '../../static/common'import goodsItem from '../common/goodsItem';import ScrollTop from '../basic/scrollTop';export default {  name: "categoryDetail",  components: {    ScrollTop,    sort,    goodsItem,    titles  },  setup( props, context) {    let title = props.title    let params = { material_id: 17004, q: '', has_coupon: true, sort: 'tk_total_sales_des', page_no: 0 }    params.cat = props.cat    params.q = props.q    let datas = {}    const noMore = ref(false)    const data = ref([])    const getData = function () {      params.page_no += 1      handleRequests(getSearchItem, params, noMore, data)    }    getData()    const handleSort = function (str) {      // 保存数据到datas      if (!datas[params.sort]) {        datas[params.sort] = {}      }      datas[params.sort].data = data.value      datas[params.sort].page_no = params.page_no      params.sort = str      // 重置data数据      data.value = []      // 读取数据      if (datas[str]) {        data.value = datas[str].data        params.page_no = datas[str].page_no        return      }      // 更改params参数      params.page_no = 0      getData()    }    scrollToLowerLoad("#goods", getData, 84)    return {      title,      handleSort,      data    }  }}</script><style scoped lang="scss">.head {  position: fixed;  width: 100%;  z-index: 300;}#goods {  padding-top: 170rpx;}</style>